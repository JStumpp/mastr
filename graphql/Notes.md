\copy public."EinheitenSolar" from '../mastr/EinheitenSolar_1.csv' CSV;

create table public."EinheitenSolar" (
  "EinheitMastrNummer" text not null,
  "DatumLetzteAktualisierung" text not null,
  "LokationMaStRNummer" text references public."Lokationen"("MastrNummer") deferrable initially deferred,
  "NetzbetreiberpruefungStatus" integer not null,
  "NetzbetreiberpruefungDatum" text,
  "AnlagenbetreiberMastrNummer" text references public."Marktakteure"("MastrNummer") deferrable initially deferred,
  "Land" integer not null references public."Katalogwerte"("Id") deferrable initially deferred,
  "Bundesland" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Landkreis" text,
  "Gemeinde" text,
  "Gemeindeschluessel" text,
  "Postleitzahl" text not null,
  "Gemarkung" text,
  "FlurFlurstuecknummern" text,
  "Strasse" text,
  "StrasseNichtGefunden" integer,
  "Hausnummer" text,
  "Hausnummer_nv" integer,
  "HausnummerNichtGefunden" integer,
  "Adresszusatz" text,
  "Ort" text,
  "Laengengrad" real,
  "Breitengrad" real,
  "Registrierungsdatum" text,
  "GeplantesInbetriebnahmedatum" text,
  "Inbetriebnahmedatum" text,
  "DatumEndgueltigeStilllegung" text,
  "DatumBeginnVoruebergehendeStilllegung" text,
  "DatumWiederaufnahmeBetrieb" text,
  "EinheitSystemstatus" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "EinheitBetriebsstatus" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "BestandsanlageMastrNummer" text,
  "NichtVorhandenInMigriertenEinheiten" integer,
  "AltAnlagenbentreiberMastrNummer" text,
  "DatumDesBetreiberwechsels" text,
  "DatumRegistrierungDesBetreiberwechsels" text,
  "NameStromerzeugungseinheit" text not null,
  "Weic" text,
  "Weic_nv" integer not null,
  "WeicDisplayName" text,
  "Kraftwerksnummer" text,
  "Kraftwerksnummer_nv" integer not null,
  "Energietraeger" integer not null references public."Katalogwerte"("Id") deferrable initially deferred,
  "Bruttoleistung" real not null,
  "Nettonennleistung" real not null,
  "AnschlussAnHoechstOderHochSpannung" integer,
  "Schwarzstartfaehigkeit" integer,
  "Inselbetriebsfaehigkeit" integer,
  "Einsatzverantwortlicher" text,
  "FernsteuerbarkeitNb" integer,
  "FernsteuerbarkeitDv" integer,
  "FernsteuerbarkeitDr" integer,
  "Einspeisungsart" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "PraequalifiziertFuerRegelenergie" integer,
  "GenMastrNummer" text,
  "ZugeordneteWirkleistungWechselrichter" text,
  "GemeinsamerWechselrichterMitSpeicher" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "AnzahlModule" integer,
  "Lage" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Leistungsbegrenzung" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "EinheitlicheAusrichtungUndNeigungswinkel" integer,
  "Hauptausrichtung" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "HauptausrichtungNeigungswinkel" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Nebenausrichtung" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "NebenausrichtungNeigungswinkel" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "InAnspruchGenommeneFlaeche" real,
  "ArtDerFlaecheIds" text,
  "InAnspruchGenommeneAckerflaeche" real,
  "Nutzungsbereich" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "EegMaStRNummer" text references public."AnlagenEegSolar"("EegMaStRNummer") deferrable initially deferred,
  primary key ("EinheitMastrNummer")
);

create table public."AnlagenEegSolar" (
  "Registrierungsdatum" text not null,
  "DatumLetzteAktualisierung" text not null,
  "EegInbetriebnahmedatum" text,
  "EegMaStRNummer" text not null,
  "InanspruchnahmeZahlungNachEeg" integer,
  "AnlagenschluesselEeg" text,
  "AnlagenkennzifferAnlagenregister" text,
  "AnlagenkennzifferAnlagenregister_nv" integer not null,
  "InstallierteLeistung" real,
  "RegistrierungsnummerPvMeldeportal" text,
  "RegistrierungsnummerPvMeldeportal_nv" integer not null,
  "MieterstromZugeordnet" integer,
  "MieterstromRegistrierungsdatum" text,
  "MieterstromMeldedatum" text,
  "MieterstromErsteZuordnungZuschlag" text,
  "AusschreibungZuschlag" integer,
  "ZugeordneteGebotsmenge" real,
  "Zuschlagsnummer" text,
  "AnlageBetriebsstatus" integer not null references public."Katalogwerte"("Id") deferrable initially deferred,
  "VerknuepfteEinheitenMaStRNummern" text,
  primary key ("EegMaStRNummer")
);

create table public."Marktakteure" (
  "MastrNummer" text not null,
  "DatumLetzeAktualisierung" text,
  "Personenart" integer not null references public."Katalogwerte"("Id") deferrable initially deferred,
  "MarktakteurVorname" text,
  "MarktakteurNachname" text,
  "Firmenname" text,
  "Marktfunktion" integer not null,
  "Rechtsform" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "SonstigeRechtsform" text,
  "Marktrollen" text,
  "Land" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Region" text,
  "Strasse" text,
  "Hausnummer" text,
  "Hausnummer_nv" integer,
  "Adresszusatz" text,
  "Postleitzahl" text,
  "Ort" text,
  "Bundesland" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Netz" text,
  "Nuts2" text,
  "Email" text,
  "Telefon" text,
  "Fax" text,
  "Fax_nv" integer,
  "Webseite" text,
  "Webseite_nv" integer,
  "Registergericht" integer,
  "Registergericht_nv" integer,
  "RegistergerichtAusland" text,
  "RegistergerichtAusland_nv" integer,
  "Registernummer" text,
  "Registernummer_nv" integer,
  "RegisternummerAusland" text,
  "RegisternummerAusland_nv" integer,
  "Taetigkeitsbeginn" text,
  "AcerCode" text,
  "AcerCode_nv" integer,
  "Umsatzsteueridentifikationsnummer" text,
  "Umsatzsteueridentifikationsnummer_nv" integer,
  "Taetigkeitsende" text,
  "Taetigkeitsende_nv" integer,
  "BundesnetzagenturBetriebsnummer" text,
  "BundesnetzagenturBetriebsnummer_nv" integer,
  "LandAnZustelladresse" integer,
  "PostleitzahlAnZustelladresse" text,
  "OrtAnZustelladresse" text,
  "StrasseAnZustelladresse" text,
  "HausnummerAnZustelladresse" text,
  "HausnummerAnZustelladresse_nv" integer,
  "AdresszusatzAnZustelladresse" text,
  "Kmu" integer,
  "TelefonnummerVMav" text,
  "EmailVMav" text,
  "RegistrierungsdatumMarktakteur" text,
  "HauptwirtdschaftszweigAbteilung" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "HauptwirtdschaftszweigGruppe" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "HauptwirtdschaftszweigAbschnitt" integer references public."Katalogwerte"("Id") deferrable initially deferred,
  "Direktvermarktungsunternehmen" integer,
  "BelieferungVonLetztverbrauchernStrom" integer,
  "BelieferungHaushaltskundenStrom" integer,
  "Gasgrosshaendler" integer,
  "Stromgrosshaendler" integer,
  "BelieferungVonLetztverbrauchernGas" integer,
  "BelieferungHaushaltskundenGas" integer,
  primary key ("MastrNummer")
);

create table public."Katalogwerte" (
  "Id" integer not null,
  "Wert" text not null,
  "KatalogKategorieId" integer not null references public."Katalogkategorien"("Id") deferrable initially deferred,
  primary key ("Id")
);

create table public."Lokationen" (
  "DatumLetzteAktualisierung" text,
  "MastrNummer" text not null,
  "NameDerTechnischenLokation" text,
  "Lokationtyp" text not null,
  "VerknuepfteEinheitenMaStRNummern" text,
  "NetzanschlusspunkteMaStRNummern" text,
  primary key ("MastrNummer")
);
